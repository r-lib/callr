<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Run an R CMD command form within R. This will usually start
another R process, from a shell script."><title>Run an R CMD command — rcmd • callr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Source%20Sans%20Pro-0.4.1/font.css" rel="stylesheet"><link href="../deps/_Source%20Code%20Pro-0.4.1/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Run an R CMD command — rcmd"><meta property="og:description" content="Run an R CMD command form within R. This will usually start
another R process, from a shell script."><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script defer data-domain="callr.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">callr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">3.7.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2019/09/callr-task-q">A multi process task queue in 100 lines of R code</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <a class="dropdown-item" href="../news/index.html">Change log</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/r-lib/callr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Run an <code>R CMD</code> command</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/callr/blob/HEAD/R/rcmd.R" class="external-link"><code>R/rcmd.R</code></a></small>
      <div class="d-none name"><code>rcmd.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Run an <code>R CMD</code> command form within R. This will usually start
another R process, from a shell script.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">rcmd</span><span class="op">(</span>
  <span class="va">cmd</span>,
  cmdargs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span>,
  libpath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths</a></span><span class="op">(</span><span class="op">)</span>,
  repos <span class="op">=</span> <span class="fu"><a href="default_repos.html">default_repos</a></span><span class="op">(</span><span class="op">)</span>,
  stdout <span class="op">=</span> <span class="cn">NULL</span>,
  stderr <span class="op">=</span> <span class="cn">NULL</span>,
  poll_connection <span class="op">=</span> <span class="cn">TRUE</span>,
  echo <span class="op">=</span> <span class="cn">FALSE</span>,
  show <span class="op">=</span> <span class="cn">FALSE</span>,
  callback <span class="op">=</span> <span class="cn">NULL</span>,
  block_callback <span class="op">=</span> <span class="cn">NULL</span>,
  spinner <span class="op">=</span> <span class="va">show</span> <span class="op">&amp;&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span>,
  system_profile <span class="op">=</span> <span class="cn">FALSE</span>,
  user_profile <span class="op">=</span> <span class="st">"project"</span>,
  env <span class="op">=</span> <span class="fu"><a href="rcmd_safe_env.html">rcmd_safe_env</a></span><span class="op">(</span><span class="op">)</span>,
  timeout <span class="op">=</span> <span class="cn">Inf</span>,
  wd <span class="op">=</span> <span class="st">"."</span>,
  fail_on_status <span class="op">=</span> <span class="cn">FALSE</span>,
  <span class="va">...</span>
<span class="op">)</span>

<span class="fu">rcmd_safe</span><span class="op">(</span>
  <span class="va">cmd</span>,
  cmdargs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span>,
  libpath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths</a></span><span class="op">(</span><span class="op">)</span>,
  repos <span class="op">=</span> <span class="fu"><a href="default_repos.html">default_repos</a></span><span class="op">(</span><span class="op">)</span>,
  stdout <span class="op">=</span> <span class="cn">NULL</span>,
  stderr <span class="op">=</span> <span class="cn">NULL</span>,
  poll_connection <span class="op">=</span> <span class="cn">TRUE</span>,
  echo <span class="op">=</span> <span class="cn">FALSE</span>,
  show <span class="op">=</span> <span class="cn">FALSE</span>,
  callback <span class="op">=</span> <span class="cn">NULL</span>,
  block_callback <span class="op">=</span> <span class="cn">NULL</span>,
  spinner <span class="op">=</span> <span class="va">show</span> <span class="op">&amp;&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span>,
  system_profile <span class="op">=</span> <span class="cn">FALSE</span>,
  user_profile <span class="op">=</span> <span class="st">"project"</span>,
  env <span class="op">=</span> <span class="fu"><a href="rcmd_safe_env.html">rcmd_safe_env</a></span><span class="op">(</span><span class="op">)</span>,
  timeout <span class="op">=</span> <span class="cn">Inf</span>,
  wd <span class="op">=</span> <span class="st">"."</span>,
  fail_on_status <span class="op">=</span> <span class="cn">FALSE</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>cmd</dt>
<dd><p>Command to run. See <code>R --help</code> from the command
line for the various commands. In the current version of R (3.2.4)
these are: <code>BATCH</code>, <code>COMPILE</code>, <code>SHLIB</code>, <code>INSTALL</code>, <code>REMOVE</code>, <code>build</code>,
<code>check</code>, <code>LINK</code>, <code>Rprof</code>, <code>Rdconv</code>, <code>Rd2pdf</code>, <code>Rd2txt</code>, <code>Stangle</code>,
<code>Sweave</code>, <code>Rdiff</code>, <code>config</code>, <code>javareconf</code>, <code>rtags</code>.</p></dd>


<dt>cmdargs</dt>
<dd><p>Command line arguments.</p></dd>


<dt>libpath</dt>
<dd><p>The library path.</p></dd>


<dt>repos</dt>
<dd><p>The <code>repos</code> option. If <code>NULL</code>, then no
<code>repos</code> option is set. This options is only used if
<code>user_profile</code> or <code>system_profile</code> is set <code>FALSE</code>,
as it is set using the system or the user profile.</p></dd>


<dt>stdout</dt>
<dd><p>Optionally a file name to send the standard output to.</p></dd>


<dt>stderr</dt>
<dd><p>Optionally a file name to send the standard error to.
It may be the same as <code>stdout</code>, in which case standard error is
redirected to standard output. It can also be the special string
<code>"2&gt;&amp;1"</code>, in which case standard error will be redirected to standard
output.</p></dd>


<dt>poll_connection</dt>
<dd><p>Whether to have a control connection to
the process. This is used to transmit messages from the subprocess
to the parent.</p></dd>


<dt>echo</dt>
<dd><p>Whether to echo the complete command run by <code>rcmd</code>.</p></dd>


<dt>show</dt>
<dd><p>Logical, whether to show the standard output on the screen
while the child process is running. Note that this is independent
of the <code>stdout</code> and <code>stderr</code> arguments. The standard
error is not shown currently.</p></dd>


<dt>callback</dt>
<dd><p>A function to call for each line of the standard
output and standard error from the child process. It works together
with the <code>show</code> option; i.e. if <code>show = TRUE</code>, and a
callback is provided, then the output is shown of the screen, and the
callback is also called.</p></dd>


<dt>block_callback</dt>
<dd><p>A function to call for each block of the standard
output and standard error. This callback is not line oriented, i.e.
multiple lines or half a line can be passed to the callback.</p></dd>


<dt>spinner</dt>
<dd><p>Whether to show a calming spinner on the screen while
the child R session is running. By default it is shown if
<code>show = TRUE</code> and the R session is interactive.</p></dd>


<dt>system_profile</dt>
<dd><p>Whether to use the system profile file.</p></dd>


<dt>user_profile</dt>
<dd><p>Whether to use the user's profile file.
If this is <code>"project"</code>, then only the profile from the working
directory is used, but the <code>R_PROFILE_USER</code> environment variable
and the user level profile are not. See also "Security considerations"
below.</p></dd>


<dt>env</dt>
<dd><p>Environment variables to set for the child process.</p></dd>


<dt>timeout</dt>
<dd><p>Timeout for the function call to finish. It can be a
<a href="https://rdrr.io/r/base/difftime.html" class="external-link">base::difftime</a> object, or a real number, meaning seconds.
If the process does not finish before the timeout period expires,
then a <code>system_command_timeout_error</code> error is thrown. <code>Inf</code>
means no timeout.</p></dd>


<dt>wd</dt>
<dd><p>Working directory to use for running the command. Defaults
to the current working directory.</p></dd>


<dt>fail_on_status</dt>
<dd><p>Whether to throw an R error if the command returns
with a non-zero status code. By default no error is thrown.</p></dd>


<dt>...</dt>
<dd><p>Extra arguments are passed to <code><a href="http://processx.r-lib.org/reference/run.html" class="external-link">processx::run()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list with the command line <code>$command</code>),
standard output (<code>$stdout</code>), standard error (<code>stderr</code>),
exit status (<code>$status</code>) of the external <code>R CMD</code> command, and
whether a timeout was reached (<code>$timeout</code>).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Starting from <code>callr</code> 2.0.0, <code>rcmd()</code> has safer defaults, the same as
the <code>rcmd_safe()</code> default values. Use <code><a href="rcmd_copycat.html">rcmd_copycat()</a></code> for the old
defaults.</p>
    </div>
    <div class="section level2">
    <h2 id="security-considerations">Security considerations<a class="anchor" aria-label="anchor" href="#security-considerations"></a></h2>
    


<p><code>callr</code> makes a copy of the user's <code>.Renviron</code> file and potentially of
the local or user <code>.Rprofile</code>, in the session temporary
directory. Avoid storing sensitive information such as passwords, in
your environment file or your profile, otherwise this information will
get scattered in various files, at least temporarily, until the
subprocess finishes. You can use the keyring package to avoid passwords
in plain files.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other R CMD commands: 
<code><a href="rcmd_bg.html">rcmd_bg</a>()</code>,
<code><a href="rcmd_copycat.html">rcmd_copycat</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="fu">rcmd</span><span class="op">(</span><span class="st">"config"</span>, <span class="st">"CC"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://github.com/gaborcsardi" class="external-link">Gábor Csárdi</a>, <a href="https://github.com/wch" class="external-link">Winston Chang</a>, <a href="https://www.rstudio.com" class="external-link"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" width="72"></a>, Mango Solutions.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

  </div></footer></body></html>

